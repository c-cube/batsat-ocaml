
(rule
 (targets libcbatsat%{ext_lib})
 (deps (:lib clib/libcbatsat%{ext_lib}))
 (action (run cp %{lib} .)))

(library
  (name batsat)
  (public_name batsat)
  (libraries threads)
  (wrapped false)
  (modules batsat)
  (flags :standard -safe-string -w @8)
  (foreign_archives cbatsat)
  (foreign_stubs
    (language c)
    (flags :standard -fPIC -std=c99)
    (names stubs))
  (c_library_flags :standard -ldl -lpthread)
  (no_dynlink))
